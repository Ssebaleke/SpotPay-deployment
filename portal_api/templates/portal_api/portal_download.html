{% extends "accounts/base.html" %}

{% block title %}
{{ location.site_name }} – Captive Portal Download
{% endblock %}

{% block content %}
<style>
    .portal-wrapper {
        max-width: 560px;
        margin: 50px auto;
        padding: 0 15px;
    }

    .portal-card {
        background: #ffffff;
        border-radius: 14px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.12);
        padding: 32px;
    }

    .portal-header {
        text-align: center;
        margin-bottom: 25px;
    }

    .portal-header h2 {
        margin: 0;
        font-size: 26px;
        font-weight: 700;
        color: #111827;
    }

    .portal-header p {
        margin-top: 6px;
        color: #6b7280;
        font-size: 14px;
    }

    .portal-meta {
        background: #f9fafb;
        border-radius: 10px;
        padding: 16px;
        margin-bottom: 26px;
        font-size: 14px;
    }

    .portal-meta div {
        margin-bottom: 8px;
        color: #374151;
    }

    .portal-meta span {
        font-weight: 600;
        color: #111827;
    }

    .download-btn {
        display: block;
        width: 100%;
        background: linear-gradient(135deg, #2563eb, #1e40af);
        color: #ffffff;
        text-align: center;
        padding: 15px;
        border-radius: 8px;
        font-weight: 700;
        text-decoration: none;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .download-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 22px rgba(37,99,235,0.35);
        color: #ffffff;
    }

    .disabled-box {
        background: #fef3c7;
        color: #92400e;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        font-weight: 600;
    }

    .instructions {
        margin-top: 26px;
        font-size: 13px;
        color: #6b7280;
        line-height: 1.6;
    }

    .uuid-box {
        font-family: monospace;
        background: #eef2ff;
        padding: 8px;
        border-radius: 6px;
        word-break: break-all;
        margin-top: 6px;
        font-size: 13px;
    }
</style>

<div class="portal-wrapper">
    <div class="portal-card">

        <div class="portal-header">
            <h2>{{ location.site_name }}</h2>
            <p>Captive Portal Download</p>
        </div>

        <div class="portal-meta">
            <div><span>Location Type:</span> {{ location.get_location_type_display }}</div>
            <div><span>Address:</span> {{ location.address }}</div>
            <div><span>Status:</span> {{ location.status }}</div>
            <div>
                <span>Location UUID:</span>
                <div class="uuid-box">{{ location.uuid }}</div>
            </div>
        </div>

        {% if location.status == "ACTIVE" %}
            <a class="download-btn"
               href="/api/portal/{{ location.uuid }}/download/">
                ⬇ Download Captive Portal ZIP
            </a>
        {% else %}
            <div class="disabled-box">
                This location is not active yet.  
                Please wait for admin approval.
            </div>
        {% endif %}

        <div class="instructions">
            <strong>How to use this file:</strong><br>
            1. Download the ZIP file<br>
            2. Extract or upload it to your MikroTik hotspot folder<br>
            3. Replace the existing portal files<br>
            4. Restart the hotspot service<br>
            <br>
            Your customers will now see your branded captive portal.
        </div>

    </div>
</div>
{% endblock %}
